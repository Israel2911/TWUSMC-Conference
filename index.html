<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ğŸŒ 3D World Globe + UNIFORM CARDS</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: #000011; overflow: hidden; height: 100vh; font-family: -apple-system, Arial, sans-serif; }
    
    #container { position: relative; width: 100vw; height: 100vh; }
    canvas { display: block; width: 100%; height: 100%; }
    
    .globe-controls { position: absolute; top: 20px; right: 20px; z-index: 100; }
    .pause-btn { 
      padding: 15px 25px; background: rgba(0,255,136,0.2); 
      border: 2px solid #00ff88; color: white; border-radius: 30px; 
      cursor: pointer; font-weight: bold; font-size: 16px;
      backdrop-filter: blur(15px); transition: all 0.3s;
    }
    .pause-btn:hover { background: rgba(0,255,136,0.4); transform: scale(1.05); }
    .pause-btn.active { background: #00ff88; color: black; }

    .time-cards {
      position: absolute; left: 20px; top: 50%; transform: translateY(-50%);
      background: rgba(0,0,20,0.9); border: 1px solid rgba(0,255,136,0.3);
      border-radius: 20px; padding: 20px; max-height: 80vh;
      overflow-y: auto; backdrop-filter: blur(20px); z-index: 100;
      min-width: 280px; box-shadow: 0 20px 40px rgba(0,0,0,0.5);
    }
    .time-card { display: flex; align-items: center; padding: 12px 0; border-bottom: 1px solid rgba(0,255,136,0.2); transition: all 0.3s; font-size: 16px; font-weight: 500; }
    .time-card:last-child { border-bottom: none; }
    .time-card:hover { background: rgba(0,255,136,0.1); padding-left: 8px; }
    .flag { font-size: 28px; margin-right: 12px; }
    .time-text { color: #00ff88; font-family: 'Courier New', monospace; font-weight: bold; }
    .country-name { color: #ffffff; margin-right: 8px; }
  </style>
</head>
<body>
  <div id="container">
    <div class="globe-controls">
      <button class="pause-btn active" id="pauseRotate">â¸ï¸ Pause Rotation</button>
    </div>

    <div class="time-cards" id="timeCards">
      <div class="time-card" id="card-India"><span class="flag">ğŸ‡®ğŸ‡³</span><span class="country-name">India IST</span><span class="time-text" id="time-India">--:--</span></div>
      <div class="time-card" id="card-Canada"><span class="flag">ğŸ‡¨ğŸ‡¦</span><span class="country-name">Canada PST</span><span class="time-text" id="time-Canada">--:--</span></div>
      <div class="time-card" id="card-Thailand"><span class="flag">ğŸ‡¹ğŸ‡­</span><span class="country-name">Thailand ICT</span><span class="time-text" id="time-Thailand">--:--</span></div>
      <div class="time-card" id="card-Europe"><span class="flag">ğŸ‡ªğŸ‡º</span><span class="country-name">Europe CET</span><span class="time-text" id="time-Europe">--:--</span></div>
      <div class="time-card" id="card-UK"><span class="flag">ğŸ‡¬ğŸ‡§</span><span class="country-name">UK GMT</span><span class="time-text" id="time-UK">--:--</span></div>
      <div class="time-card" id="card-USA"><span class="flag">ğŸ‡ºğŸ‡¸</span><span class="country-name">USA EST</span><span class="time-text" id="time-USA">--:--</span></div>
      <div class="time-card" id="card-Singapore"><span class="flag">ğŸ‡¸ğŸ‡¬</span><span class="country-name">Singapore SGT</span><span class="time-text" id="time-Singapore">--:--</span></div>
      <div class="time-card" id="card-Malaysia"><span class="flag">ğŸ‡²ğŸ‡¾</span><span class="country-name">Malaysia MYT</span><span class="time-text" id="time-Malaysia">--:--</span></div>
    </div>
  </div>

  <script>
    const container = document.getElementById('container');
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setClearColor(0x000011);
    container.appendChild(renderer.domElement);

    camera.position.set(0, 0, 2.8);
    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.05;
    controls.autoRotate = true;
    controls.autoRotateSpeed = 0.8;

    scene.add(new THREE.AmbientLight(0xffffff, 0.8));
    const dirLight = new THREE.DirectionalLight(0xffffff, 1.8);
    dirLight.position.set(2, 2, 2);
    scene.add(dirLight);

    const globeGroup = new THREE.Group();
    scene.add(globeGroup);

    const textureLoader = new THREE.TextureLoader();
    textureLoader.load(
      'https://upload.wikimedia.org/wikipedia/commons/thumb/c/cd/Land_ocean_ice_2048.jpg/1024px-Land_ocean_ice_2048.jpg',
      (earthTexture) => {
        globeGroup.add(new THREE.Mesh(
          new THREE.SphereGeometry(1, 64, 64),
          new THREE.MeshLambertMaterial({ map: earthTexture, transparent: true, opacity: 0.95 })
        ));
      }
    );

    const countries = [
      {name: 'India', flag: 'ğŸ‡®ğŸ‡³', lat: 22, lng: 78, tz: 'Asia/Kolkata', color: 0xFF9933, cardId: 'India', isKey: true},
      {name: 'Canada', flag: 'ğŸ‡¨ğŸ‡¦', lat: 56.1304, lng: -106.3468, tz: 'America/Vancouver', color: 0xff0000, cardId: 'Canada', isKey: true},
      {name: 'Thailand', flag: 'ğŸ‡¹ğŸ‡­', lat: 13.7563, lng: 100.5018, tz: 'Asia/Bangkok', color: 0xffcc00, cardId: 'Thailand', isKey: false},
      {name: 'Europe', flag: 'ğŸ‡ªğŸ‡º', lat: 48.8566, lng: 2.3522, tz: 'Europe/Paris', color: 0x0000FF, cardId: 'Europe', isKey: false},
      {name: 'UK', flag: 'ğŸ‡¬ğŸ‡§', lat: 53, lng: -0.1276, tz: 'Europe/London', color: 0x191970, cardId: 'UK', isKey: false},
      {name: 'USA', flag: 'ğŸ‡ºğŸ‡¸', lat: 39.8283, lng: -98.5795, tz: 'America/New_York', color: 0x003366, cardId: 'USA', isKey: false},
      {name: 'Singapore', flag: 'ğŸ‡¸ğŸ‡¬', lat: 1.35, lng: 103.8, tz: 'Asia/Singapore', color: 0xEE2536, cardId: 'Singapore', isKey: false},
      {name: 'Malaysia', flag: 'ğŸ‡²ğŸ‡¾', lat: 4, lng: 102, tz: 'Asia/Kuala_Lumpur', color: 0xFFD700, cardId: 'Malaysia', isKey: false}
    ];

    const cardFlags = [];

    function latLonToVector3(lat, lon, radius) {
      const phi = (90 - lat) * (Math.PI / 180);
      const theta = (lon + 180) * (Math.PI / 180);
      return new THREE.Vector3(
        -radius * Math.sin(phi) * Math.cos(theta),
        radius * Math.cos(phi),
        radius * Math.sin(phi) * Math.sin(theta)
      );
    }

    // âœ… ALL CARDS SAME SIZE - India/Canada just glow brighter
    const UNIFORM_WIDTH = 420;
    const UNIFORM_HEIGHT = 220;
    
    countries.forEach((country, index) => {
      const flagCanvas = document.createElement('canvas');
      flagCanvas.width = UNIFORM_WIDTH;
      flagCanvas.height = UNIFORM_HEIGHT;
      const flagCtx = flagCanvas.getContext('2d');
      
      // CARD BACKGROUND
      const gradient = flagCtx.createLinearGradient(0, 0, 0, UNIFORM_HEIGHT);
      gradient.addColorStop(0, 'rgba(20,20,40,0.98)');
      gradient.addColorStop(1, 'rgba(0,0,20,0.98)');
      flagCtx.fillStyle = gradient;
      
      // ROUNDED CARD + GLOW (India/Canada = BRIGHTER GLOW)
      flagCtx.save();
      const glowOpacity = country.isKey ? '66' : '33';
      flagCtx.shadowColor = country.color + glowOpacity;
      flagCtx.shadowBlur = country.isKey ? 45 : 30;
      flagCtx.shadowOffsetY = 12;
      
      flagCtx.beginPath();
      flagCtx.roundRect(15, 15, 390, 190, 25);
      flagCtx.fill();
      flagCtx.restore();
      
      // WHITE BORDER
      flagCtx.strokeStyle = 'rgba(255,255,255,0.3)';
      flagCtx.lineWidth = 2;
      flagCtx.lineJoin = 'round';
      flagCtx.stroke();
      
      // COUNTRY FLAG
      flagCtx.fillStyle = '#ffffff';
      flagCtx.font = 'bold 85px Arial';
      flagCtx.textAlign = 'left';
      flagCtx.textBaseline = 'middle';
      flagCtx.fillText(country.flag, 45, 110);
      
      // COUNTRY NAME (more spacing)
      flagCtx.fillStyle = '#e0e0ff';
      flagCtx.font = 'bold 38px Arial';
      flagCtx.textAlign = 'left';
      flagCtx.textBaseline = 'middle';
      flagCtx.fillText(country.name, 160, 110);
      
      // TIME (RIGHT - NO OVERLAP)
      const now = new Date();
      const time = now.toLocaleTimeString('en-US', {
        timeZone: country.tz,
        hour12: false,
        hour: '2-digit',
        minute: '2-digit'
      });
      
      flagCtx.fillStyle = index === 0 ? '#FFD700' : '#00ff88';
      flagCtx.font = 'bold 70px Courier New';
      flagCtx.textAlign = 'right';
      flagCtx.textBaseline = 'middle';
      flagCtx.shadowColor = flagCtx.fillStyle;
      flagCtx.shadowBlur = 25;
      flagCtx.shadowOffsetX = 3;
      flagCtx.shadowOffsetY = 3;
      flagCtx.fillText(time, 375, 115);
      flagCtx.shadowBlur = 0;
      
      const cardFlag = new THREE.Sprite(new THREE.SpriteMaterial({
        map: new THREE.CanvasTexture(flagCanvas),
        transparent: true
      }));
      cardFlag.position.copy(latLonToVector3(country.lat, country.lng, 1.18));
      cardFlag.lookAt(0, 0, 0);
      cardFlag.scale.set(0.34, 0.20, 1);
      globeGroup.add(cardFlag);
      cardFlags.push({ canvas: flagCanvas, ctx: flagCtx, sprite: cardFlag, country, index });
    });

    // PAUSE BUTTON
    let isPaused = false;
    document.getElementById('pauseRotate').onclick = () => {
      isPaused = !isPaused;
      controls.autoRotate = !isPaused;
      controls.enableDamping = !isPaused;
      const btn = document.getElementById('pauseRotate');
      btn.classList.toggle('active');
      btn.textContent = isPaused ? 'â–¶ï¸ Resume Rotation' : 'â¸ï¸ Pause Rotation';
    };

    // UPDATE UNIFORM CARDS
    function updateTimes() {
      countries.forEach((country, index) => {
        const now = new Date();
        const time = now.toLocaleTimeString('en-US', {
          timeZone: country.tz,
          hour12: false,
          hour: '2-digit',
          minute: '2-digit'
        });
        
        document.getElementById(`time-${country.cardId}`).textContent = time;
        
        const flagData = cardFlags[index];
        flagData.ctx.clearRect(0, 0, UNIFORM_WIDTH, UNIFORM_HEIGHT);
        
        // RECREATE SAME SIZE
        const gradient = flagData.ctx.createLinearGradient(0, 0, 0, UNIFORM_HEIGHT);
        gradient.addColorStop(0, 'rgba(20,20,40,0.98)');
        gradient.addColorStop(1, 'rgba(0,0,20,0.98)');
        flagData.ctx.fillStyle = gradient;
        
        flagData.ctx.save();
        const glowOpacity = country.isKey ? '66' : '33';
        flagData.ctx.shadowColor = country.color + glowOpacity;
        flagData.ctx.shadowBlur = country.isKey ? 45 : 30;
        flagData.ctx.shadowOffsetY = 12;
        flagData.ctx.beginPath();
        flagData.ctx.roundRect(15, 15, 390, 190, 25);
        flagData.ctx.fill();
        flagData.ctx.restore();
        
        flagData.ctx.strokeStyle = 'rgba(255,255,255,0.3)';
        flagData.ctx.lineWidth = 2;
        flagData.ctx.lineJoin = 'round';
        flagData.ctx.stroke();
        
        // CONTENT (perfect spacing)
        flagData.ctx.fillStyle = '#ffffff';
        flagData.ctx.font = 'bold 85px Arial';
        flagData.ctx.textAlign = 'left';
        flagData.ctx.textBaseline = 'middle';
        flagData.ctx.fillText(country.flag, 45, 110);
        
        flagData.ctx.fillStyle = '#e0e0ff';
        flagData.ctx.font = 'bold 38px Arial';
        flagData.ctx.textAlign = 'left';
        flagData.ctx.textBaseline = 'middle';
        flagData.ctx.fillText(country.name, 160, 110);
        
        flagData.ctx.fillStyle = index === 0 ? '#FFD700' : '#00ff88';
        flagData.ctx.font = 'bold 70px Courier New';
        flagData.ctx.textAlign = 'right';
        flagData.ctx.textBaseline = 'middle';
        flagData.ctx.shadowColor = flagData.ctx.fillStyle;
        flagData.ctx.shadowBlur = 25;
        flagData.ctx.shadowOffsetX = 3;
        flagData.ctx.shadowOffsetY = 3;
        flagData.ctx.fillText(time, 375, 115);
        flagData.ctx.shadowBlur = 0;
        
        flagData.sprite.material.map.needsUpdate = true;
      });
    }

    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });

    const clock = new THREE.Clock();
    function animate() {
      requestAnimationFrame(animate);
      controls.update();

      const elapsed = clock.getElapsedTime();
      if (!isPaused) {
        globeGroup.rotation.y = elapsed * 0.25;
      }

      // India + Canada subtle pulse
      cardFlags[0].sprite.scale.setScalar(1 + Math.sin(elapsed * 4) * 0.12);
      cardFlags[1].sprite.scale.setScalar(1 + Math.sin(elapsed * 3) * 0.10);

      renderer.render(scene, camera);
    }
    
    setInterval(updateTimes, 1000);
    animate();
  </script>
</body>
</html>
